<ngx-datatable
  class="material"
  [rows]="this.rows | gridFilter: this.filters"
  (click)="closeOtherMenus($event)"
  columnMode="force"
  [selectionType]="'checkbox'"
  (select)="onSelect($event)"
  [messages]="messages"
  [headerHeight]="70"
  [footerHeight]="35"
  rowHeight="auto">
  <ngx-datatable-column [width]="30" [sortable]="false" [canAutoResize]="false" [draggable]="false" [resizeable]="false">
    <ng-template ngx-datatable-header-template let-value="value" let-allRowsSelected="allRowsSelected" let-selectFn="selectFn">
      <app-filter-container [label]="'&nbsp;'">        
        <input style="display:block;margin-top:7px;" input type="checkbox" [checked]="allRowsSelected" (change)="selectFn(!allRowsSelected)"/>
      </app-filter-container>
    </ng-template>
    <ng-template ngx-datatable-cell-template let-value="value" let-isSelected="isSelected" let-onCheckboxChangeFn="onCheckboxChangeFn">
      <input type="checkbox" [checked]="isSelected" (change)="onCheckboxChangeFn($event)"/>
    </ng-template>
  </ngx-datatable-column>
  <ngx-datatable-column 
    *ngFor="let c of this.columns"
    [ngSwitch]="c.type"
    [name]="c.name" [prop]="c.prop">
    <ng-template let-column="column" ngx-datatable-header-template let-sort="sortFn">
      <app-string-filter *ngSwitchCase="'string'" 
        [displayName]="c.name" 
        [name]="c.prop"
        (filter)="this.applyFilter($event)">
      </app-string-filter>
      <app-number-filter *ngSwitchCase="'number'"
        [displayName]="c.name"
        [name]="c.prop"
        (filter)="this.applyFilter($event)">
      </app-number-filter>
      <app-bool-filter *ngSwitchCase="'bool'"
        [displayName]="c.name"
        [name]="c.prop"
        (filter)="this.applyFilter($event)">
      </app-bool-filter>
      <app-list-filter *ngSwitchCase="'list'"
        [displayName]="c.name"
        [name]="c.prop"
        [list]="c.list"
        (filter)="this.applyFilter($event)">
      </app-list-filter>
      <!-- <app-date-filter *ngSwitchCase="'date'" [name]="c.name" (filter)="this.applyFilter($event)"></app-date-filter>
       -->
    </ng-template>
    <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
      <div *ngIf="c.link != null && c.linkProp != null">                    
        <a [href]="getLink(c.link, row[c.linkProp])" *ngSwitchCase="'list'">{{this.findInList(c.list, value)}}</a>
        <a [href]="getLink(c.link, row[c.linkProp])" *ngSwitchCase="'bool'">{{value}}</a>
        <a [href]="getLink(c.link, row[c.linkProp])" *ngSwitchCase="'string'">{{value}}</a>
        <a [href]="getLink(c.link, row[c.linkProp])" *ngSwitchCase="'number'">{{value}}</a>
      </div>
      <div *ngIf="c.inlineEdit">
        <input *ngSwitchCase="'string'" type="text" (change)="c.enterValue($event)" [value]="value" />
        <input *ngSwitchCase="'number'" type="number" (change)="c.enterValue($event)" [value]="value" />

        <!-- <span *ngSwitchCase="'list'">{{this.findInList(c.list, value)}}</span>
        <input *ngSwitchCase="'bool'" type="checkbox" [checked]="value" disabled="disabled" />
        <span >{{value}}</span>
        <span *ngSwitchCase="'number'">{{value}}</span> -->
      </div>
      <!-- <div *ngIf="c.editMode" -->
      <div *ngIf="c.link == null && c.linkProp == null && c.inlineEdit == null">
          <span *ngSwitchCase="'list'">{{this.findInList(c.list, value)}}</span>
          <input *ngSwitchCase="'bool'" type="checkbox" [checked]="value" disabled="disabled" />
          <span *ngSwitchCase="'string'">{{value}}</span>
          <span *ngSwitchCase="'number'">{{value}}</span>
      </div>
    </ng-template>
  </ngx-datatable-column>
</ngx-datatable>